var diarioMariano = [
    { "eventos": ["mejillones", "caminar", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["pan de millo", "filloas", "me lave los dientes", "siesta con La Vuelta", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["mejillones", "chinchos", "me lave los dientes", "Panorama", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["caldo gallego", "licor cafe", "me lave los dientes", "mencia", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["feria del pulpo", "pementos de padron", "me lave los dientes", "caminar", "siesta con La Vuelta", "Paris de Noia"], "pulpo": false },
    { "eventos": ["caldo gallego", "filloas", "me lave los dientes", "caña de 1906", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["pizza", "me lave los dientes", "mencia", "leer el Marca", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["pan de millo", "recortarme la barba", "me lave los dientes", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "me lave los dientes", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "chinchos", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["me lave los dientes", "siesta con La Vuelta", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["navajas", "me lave los dientes", "ver el fúbol", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["vieiras", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["me lave los dientes", "mencia", "leer el Marca"], "pulpo": false },
    { "eventos": ["navajas", "chinchos", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "choveu", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["pan de millo", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "me lave los dientes", "caminar", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "me lave los dientes", "choveu", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "licor cafe", "me lave los dientes", "ver el fúbol", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "chinchos", "leer el Marca"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "licor cafe", "me lave los dientes", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "percebes", "mencia", "siesta con La Vuelta"], "pulpo": true },
    { "eventos": ["feria del pulpo", "licor cafe", "me lave los dientes", "mencia", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["feria del pulpo", "licor cafe", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["percebes", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["feria del pulpo", "caminar", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "licor cafe", "mencia", "leer el Marca"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "licor cafe", "leer el Marca"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "pementos de padron", "choveu", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "chinchos", "me lave los dientes", "caña de 1906", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["feria del pulpo", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "recortarme la barba", "leer el Marca", "Paris de Noia"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "filloas", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "me lave los dientes", "choveu", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "filloas", "ver el fúbol", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["pan de millo", "me lave los dientes", "caminar", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "percebes", "leer el Marca"], "pulpo": true },
    { "eventos": ["pizza", "leer el Marca"], "pulpo": false },
    { "eventos": ["feria del pulpo", "caminar", "leer el Marca"], "pulpo": false },
    { "eventos": ["me lave los dientes", "caminar", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "me lave los dientes", "ver el fúbol", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "Panorama", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["mejillones", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["mejillones", "recortarme la barba", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "percebes", "pementos de padron", "leer el Marca"], "pulpo": true },
    { "eventos": ["mejillones", "percebes", "me lave los dientes", "choveu", "leer el Marca"], "pulpo": false },
    { "eventos": ["feria del pulpo", "percebes", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "chinchos", "me lave los dientes", "caminar", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "percebes", "me lave los dientes", "ver el fúbol", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "me lave los dientes", "Panorama", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "percebes", "me lave los dientes", "mencia", "leer el Marca", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["navajas", "me lave los dientes", "ver el fúbol", "leer el Marca"], "pulpo": false },
    { "eventos": ["feria del pulpo", "me lave los dientes", "mencia", "leer el Marca"], "pulpo": false },
    { "eventos": ["pan de millo", "pementos de padron", "leer el Marca"], "pulpo": false },
    { "eventos": ["feria del pulpo", "chinchos", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "filloas", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["mejillones", "me lave los dientes", "caminar", "siesta con La Vuelta", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["caldo gallego", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["navajas", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["pementos de padron", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["caldo gallego", "me lave los dientes", "mencia", "leer el Marca"], "pulpo": false },
    { "eventos": ["pan de millo", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["vieiras", "pementos de padron", "ver el fúbol", "leer el Marca", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["mejillones", "filloas", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["navajas", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "licor cafe", "me lave los dientes", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["vieiras", "percebes", "caminar", "siesta con La Vuelta"], "pulpo": true },
    { "eventos": ["pan de millo", "recortarme la barba", "mencia", "siesta con La Vuelta", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["navajas", "percebes", "me lave los dientes", "leer el Marca", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "me lave los dientes", "ver el fúbol", "leer el Marca"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["mejillones", "choveu", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["mejillones", "percebes", "choveu", "siesta con La Vuelta"], "pulpo": true },
    { "eventos": ["feria del pulpo", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["carne o caldeiro", "licor cafe", "leer el Marca", "baño en a Lanzada"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "percebes", "me lave los dientes", "Panorama", "leer el Marca"], "pulpo": false },
    { "eventos": ["pizza", "me lave los dientes", "caña de 1906", "leer el Marca"], "pulpo": false },
    { "eventos": ["navajas", "me lave los dientes", "leer el Marca"], "pulpo": false },
    { "eventos": ["pan de millo", "me lave los dientes", "ver el fúbol", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["empanada de bacalao", "percebes", "me lave los dientes", "siesta con La Vuelta"], "pulpo": false }
];


var diarioMariano2 = [
    { "eventos": ["mejillones", "caminar", "siesta con La Vuelta"], "pulpo": false },
    { "eventos": ["pan de millo"], "pulpo": false },
    { "eventos": ["mejillones", "chinchos", "me lave los dientes", "Panorama", "siesta con La Vuelta"], "pulpo": true }
];



function leerDiario() {

    var lista_eventos = new Map();
    var numDias = 0; // Número de días que HAN PASADO
    var numPulpo = 0; // Numero de veces que pulpo HA SIDO TRUE

    for (const dia of diarioMariano2) {

        var eventosDia = new Array(); // Lista de eventos que ocurren un día determinado. Se construye cada día.

        for (const evento of dia.eventos) {

            // Construimos el nombre del evento y lo incluimos en la lista de eventos de ese día
            var nombre_evento = evento.split(" ").join("_");
            eventosDia.push(nombre_evento);

            // Si el evento no existe...
            if (!lista_eventos.get(nombre_evento)) {

                var objeto_evento = {
                    matriu: new Array(new Array(), new Array())
                        /*phi: phi()*/
                };

                // Incluimos el evento con su objeto en el map
                lista_eventos.set(nombre_evento, objeto_evento);

                // Inicializamos la matriz
                lista_eventos.get(nombre_evento).matriu[0][0] = numDias - numPulpo;
                lista_eventos.get(nombre_evento).matriu[0][1] = 0;
                lista_eventos.get(nombre_evento).matriu[1][0] = numPulpo;
                lista_eventos.get(nombre_evento).matriu[1][1] = 0;

            }

            if (dia.pulpo) {
                lista_eventos.get(nombre_evento).matriu[1][1] += 1;
            } else {
                lista_eventos.get(nombre_evento).matriu[0][1] += 1;
            }

        }

        // Comprobamos que eventos no han estado presentes en ese día
        for (const item of lista_eventos) {

            var nombre_item = item[0];

            if (!eventosDia.includes(nombre_item)) {

                if (dia.pulpo) {
                    lista_eventos.get(nombre_item).matriu[1][0] += 1;
                } else {
                    lista_eventos.get(nombre_item).matriu[0][0] += 1;
                }

            }

        }

        // Contabilizamos los días totales
        numDias += 1;

        // Contabilizamos los días que se ha convertido en pulpo
        if (dia.pulpo) {
            numPulpo += 1;
        }

    }

    return lista_eventos;

}



/**

 * 
 *  */

/**
 * Precondiciones para la estructura de datos
 *  
 * Tendrá que ser un objeto con 2 propiedades llamadas eventos y pulpo
 * La propiedad pulpo tendrá que contener un booleano
 * La propiedad de eventos tendrá que contener una numero indefinido de strings  
 * 
 * Quedará así ["eventos":[""], "pulpo":false/true]
 * 
 * Función que recorre la estructura de datos para comprobar
 * que esta cumple con las precondiciones 
 * @param {*} estructuraDeDatos
 * */
function checkPrecondiciones(estructuraDeDatos) {
    for (const dia of estructuraDeDatos) {

        // Comprobamos que la estructura contiene las propiedades eventos y pulpo
        if (dia.hasOwnProperty("pulpo") && dia.hasOwnProperty("eventos")) {

            // Comprobamos que la propiedad pulpo contiene un booleano
            if (typeof dia.pulpo != "boolean") {
                console.log("Error en la introducción de la estructura de datos: la propiedad pulpo solo puede contener booleanos");
                return false;
            }

            // Comprobamos que la propiedad eventos solo contiene strings
            for (const evento of dia.eventos) {

                if (typeof evento != "string") {
                    console.log("Error en la introducción de la estructura de datos: la propiedad evento solo puede contener strings");
                    return false;
                }

            }

            return true;

        } else {
            console.log("Error en la introducción de la estructura de datos: ¡la estructura de datos es incorrecta!");
            return false;
        }
    }
}


/**
 * Postcondiciones para la estructura de datos resultante
 * 
 * Tendrá que ser un objeto que contenga como clave una string y como valor un objeto que contenga 1 propiedad llamada matriz
 * La matriz será una lista con 2 listas con únicamente 2 elementos cada una
 * Estas solo podrán contener números
 * 
 * Función que comprueba que esta cumple con las postcondiciones
 * 
 *  @param {*} estructuraDeDatos 
 */
function checkPostcondiciones(estructuraDeDatos) {

    // Comprobamos que la estructura de datos sea un objeto
    if (typeof estructuraDeDatos === "object") {

        for (const evento of estructuraDeDatos) {

            // Comprobamos que la clave de nuestro objeto sea una string
            if (typeof evento[0] != "string") {
                console.log("Error en la estructura de datos resultante: la clave debe ser una string");
                return false;
            }

            // Comprobamos que la matriz sea una lista
            if (typeof evento[1] != "object") {
                console.log("Error en la estructura de datos resultante: el valor debe ser un objeto");
                return false;
            }

            // Comprobamos que la matriz solo contenga 2 listas
            if (evento[1].matriu.length != 2) {
                console.log("Error en la estructura de datos resultante: el valor debe estar compuesto por dos listas");
                return false;
            }

            // Comprobamos que la matriz solo contenga números
            for (const lista of evento[1].matriu) {
                for (const numero of lista) {
                    if (typeof numero != "number") {
                        console.log("Error en la estructura de datos resultante: la matriz solo puede contener números");
                        return false;
                    }
                }
            }


        }

        return true;

    } else {
        console.log("Error en la estructura de datos resultante: debería ser un Map");
        return false;
    }
}

var estructura = leerDiario();
checkPostcondiciones(estructura);